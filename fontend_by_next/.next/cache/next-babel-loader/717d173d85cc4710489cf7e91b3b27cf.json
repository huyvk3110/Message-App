{"ast":null,"code":"import _Object$assign from \"@babel/runtime-corejs2/core-js/object/assign\";\nimport _Promise from \"@babel/runtime-corejs2/core-js/promise\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport { default as axios } from \"axios\";\nvar HOST = 'http://127.0.0.1:3001';\n\nvar API =\n/*#__PURE__*/\nfunction () {\n  function API() {\n    _classCallCheck(this, API);\n  }\n\n  _createClass(API, null, [{\n    key: \"login\",\n    value: function login(email, password) {\n      return new _Promise(function (res, rej) {\n        axios.post(\"\".concat(HOST, \"/api/auth/login\"), {\n          username: email,\n          password: password\n        }, {\n          headers: API.headers\n        }).then(function (response) {\n          var _response$data = response.data,\n              status = _response$data.status,\n              authenticate = _response$data.authenticate,\n              data = _response$data.data;\n          console.log(response);\n\n          if (status === 'success') {\n            localStorage.setItem('token', authenticate);\n            API.headers = _Object$assign({}, API.headers, {\n              'Authorization': \"Bearer \".concat(authenticate)\n            });\n            res(data);\n          }\n        })[\"catch\"](function (error) {\n          return console.log('error', error);\n        });\n      });\n    }\n  }, {\n    key: \"loginToken\",\n    value: function loginToken() {\n      return new _Promise(function (res, rej) {\n        var token = localStorage.getItem('token');\n        if (!token) return rej();\n        API.headers = _Object$assign({}, API.headers, {\n          'Authorization': \"Bearer \".concat(token)\n        });\n        axios.post(\"\".concat(HOST, \"/api/auth/login-jwt\"), {}, {\n          headers: API.headers\n        }).then(function (response) {\n          var _response$data2 = response.data,\n              status = _response$data2.status,\n              authenticate = _response$data2.authenticate,\n              data = _response$data2.data;\n\n          if (status === 'success') {\n            res(data);\n          }\n        })[\"catch\"](function (error) {\n          return rej(error);\n        });\n      });\n    }\n  }, {\n    key: \"register\",\n    value: function register(email, password) {\n      return axios.post(\"\".concat(HOST, \"/api/account\"), {\n        email: email,\n        password: password\n      }, {\n        headers: API.headers\n      });\n    }\n  }, {\n    key: \"logout\",\n    value: function logout() {\n      return axios.post(\"\".concat(HOST, \"/api/auth/logout\"));\n    }\n  }, {\n    key: \"getAccount\",\n    value: function getAccount() {\n      return axios.get(\"\".concat(HOST, \"/api/account\"), {\n        headers: API.headers\n      });\n    }\n  }]);\n\n  return API;\n}();\n\n_defineProperty(API, \"headers\", {\n  'Content-Type': 'application/json'\n});\n\nexport { API as default };","map":null,"metadata":{},"sourceType":"module"}